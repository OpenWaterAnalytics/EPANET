<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OWA-EPANET Toolkit 2.3: Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OWA-EPANET Toolkit 2.3
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('toolkit-usage.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Usage</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following topics briefly describe how to accomplish some basic tasks using the OWA-EPANET Toolkit in C/C++ code. See the <a class="el" href="_toolkit_examples.html">Examples</a> topic for code listings of complete applications of the Toolkit.</p>
<h1><a class="anchor" id="CreateProject"></a>
Creating a Project</h1>
<p>Before any use is made of the Toolkit, a project and its handle must be created. After all processing is completed the project should be deleted. See the code snippet below:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph;  <span class="comment">// a project handle</span></div>
<div class="line"><a class="code hl_function" href="group___project.html#ga550a6ee3432932edce526c6cf0e0742e">EN_createproject</a>(&amp;ph);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Call functions that perform desired analysis</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group___project.html#ga46d6b8494c80d2f20bac8ec1d0454c6b">EN_deleteproject</a>(ph);</div>
<div class="ttc" id="aepanet2__2_8h_html_ac1b7237e65fbaad96c05cc847adc0aeb"><div class="ttname"><a href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a></div><div class="ttdeci">struct Project * EN_Project</div><div class="ttdoc">The EPANET Project wrapper object.</div><div class="ttdef"><b>Definition</b> epanet2_2.h:49</div></div>
<div class="ttc" id="agroup___project_html_ga46d6b8494c80d2f20bac8ec1d0454c6b"><div class="ttname"><a href="group___project.html#ga46d6b8494c80d2f20bac8ec1d0454c6b">EN_deleteproject</a></div><div class="ttdeci">int DLLEXPORT EN_deleteproject(EN_Project ph)</div><div class="ttdoc">Deletes a currently opened EPANET project.</div></div>
<div class="ttc" id="agroup___project_html_ga550a6ee3432932edce526c6cf0e0742e"><div class="ttname"><a href="group___project.html#ga550a6ee3432932edce526c6cf0e0742e">EN_createproject</a></div><div class="ttdeci">int DLLEXPORT EN_createproject(EN_Project *ph)</div><div class="ttdoc">Creates an EPANET project.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="DetectingErrors"></a>
Detecting Error Conditions</h1>
<p>All of the Toolkit functions return an error/warning code. A 0 indicates that the function ran successfully. A number greater than 0 but less than 100 indicates that a warning condition was generated while a number higher than 100 indicates that the function failed.</p>
<p>The meaning of specific error and warning codes are listed in the <a class="el" href="group___error_codes.html">Error Codes</a> and <a class="el" href="group___warning_codes.html">Warning Codes</a> sections of this guide. The Toolkit function <a class="el" href="group___reporting.html#ga5d93c2e74aa3532113a1bef9490ee6bc">EN_geterror</a> can be used to obtain the text of a specific error/warning code. The following example uses a macro named <code>ERRCODE</code> along with a variable named <code>errcode</code> to execute Toolkit commands only if no fatal errors have already been detected:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define ERRCODE(x) (errcode = ((errcode &gt; 100) ? (errcode) : (x)))</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> runHydraulics(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph, <span class="keywordtype">char</span> *inputFile, <span class="keywordtype">char</span> *reportFile)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> errcode = 0;</div>
<div class="line">    <span class="keywordtype">char</span> errmsg[<a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga932628312d571ecb45829966f4b54be9ad4e857d8a593d7ef18375cee0c3d6bc1">EN_MAXMSG</a> + 1];</div>
<div class="line"> </div>
<div class="line">    ERRCODE(<a class="code hl_function" href="group___project.html#gabda293c7ce17814fc886ecb1f71ecdf1">EN_open</a>(ph, inputFile, reportFile, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line">    ERRCODE(<a class="code hl_function" href="group___hydraulics.html#gaaa7aaf68ebb9c8c6709489073fc08f8e">EN_solveH</a>(ph));</div>
<div class="line">    ERRCODE(<a class="code hl_function" href="group___hydraulics.html#ga0eda31372ded11a0a053798e41be456c">EN_saveH</a>(ph));</div>
<div class="line">    ERRCODE(<a class="code hl_function" href="group___reporting.html#gac89aaac21e17d1900bcd0a7b8bac2db1">EN_report</a>(ph));</div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#ga5d93c2e74aa3532113a1bef9490ee6bc">EN_geterror</a>(errcode, errmsg, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga932628312d571ecb45829966f4b54be9ad4e857d8a593d7ef18375cee0c3d6bc1">EN_MAXMSG</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (errcode) printf(<span class="stringliteral">&quot;\n%s\n&quot;</span>, errmsg);</div>
<div class="line">}</div>
<div class="ttc" id="aepanet2__enums_8h_html_ga932628312d571ecb45829966f4b54be9ad4e857d8a593d7ef18375cee0c3d6bc1"><div class="ttname"><a href="epanet2__enums_8h.html#ga932628312d571ecb45829966f4b54be9ad4e857d8a593d7ef18375cee0c3d6bc1">EN_MAXMSG</a></div><div class="ttdeci">@ EN_MAXMSG</div><div class="ttdoc">Max. # characters in message text.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:28</div></div>
<div class="ttc" id="agroup___hydraulics_html_ga0eda31372ded11a0a053798e41be456c"><div class="ttname"><a href="group___hydraulics.html#ga0eda31372ded11a0a053798e41be456c">EN_saveH</a></div><div class="ttdeci">int DLLEXPORT EN_saveH(EN_Project ph)</div><div class="ttdoc">Transfers a project&#39;s hydraulics results from its temporary hydraulics file to its binary output file...</div></div>
<div class="ttc" id="agroup___hydraulics_html_gaaa7aaf68ebb9c8c6709489073fc08f8e"><div class="ttname"><a href="group___hydraulics.html#gaaa7aaf68ebb9c8c6709489073fc08f8e">EN_solveH</a></div><div class="ttdeci">int DLLEXPORT EN_solveH(EN_Project ph)</div><div class="ttdoc">Runs a complete hydraulic simulation with results for all time periods written to a temporary hydraul...</div></div>
<div class="ttc" id="agroup___project_html_gabda293c7ce17814fc886ecb1f71ecdf1"><div class="ttname"><a href="group___project.html#gabda293c7ce17814fc886ecb1f71ecdf1">EN_open</a></div><div class="ttdeci">int DLLEXPORT EN_open(EN_Project ph, const char *inpFile, const char *rptFile, const char *outFile)</div><div class="ttdoc">Reads an EPANET input file with no errors allowed.</div></div>
<div class="ttc" id="agroup___reporting_html_ga5d93c2e74aa3532113a1bef9490ee6bc"><div class="ttname"><a href="group___reporting.html#ga5d93c2e74aa3532113a1bef9490ee6bc">EN_geterror</a></div><div class="ttdeci">int DLLEXPORT EN_geterror(int errcode, char *out_errmsg, int maxLen)</div><div class="ttdoc">Returns the text of an error message generated by an error code.</div></div>
<div class="ttc" id="agroup___reporting_html_gac89aaac21e17d1900bcd0a7b8bac2db1"><div class="ttname"><a href="group___reporting.html#gac89aaac21e17d1900bcd0a7b8bac2db1">EN_report</a></div><div class="ttdeci">int DLLEXPORT EN_report(EN_Project ph)</div><div class="ttdoc">Writes simulation results in a tabular format to a project&#39;s report file.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="NetworkData"></a>
Providing Network Data</h1>
<p>Once a project is created there are two ways in which it can be populated with data. The first is to use the <a class="el" href="group___project.html#gabda293c7ce17814fc886ecb1f71ecdf1">EN_open</a> function to load an EPANET-formatted <a class="el" href="_inp_file.html">Input File</a> that provides a description of the network to be analyzed. This function should be called immediately after a project is created. It takes as arguments the name of the input file to open and the names of a report file and a binary output file, both of which are optional. Here is a code sample showing this approach:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph;</div>
<div class="line"><span class="keywordtype">int</span>  errcode;</div>
<div class="line"><a class="code hl_function" href="group___project.html#ga550a6ee3432932edce526c6cf0e0742e">EN_createproject</a>(&amp;ph);</div>
<div class="line">errcode = <a class="code hl_function" href="group___project.html#gabda293c7ce17814fc886ecb1f71ecdf1">EN_open</a>(ph, <span class="stringliteral">&quot;net1.inp&quot;</span>, <span class="stringliteral">&quot;net1.rpt&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (errcode == 0)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Call functions that perform desired analysis</span></div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="group___project.html#ga46d6b8494c80d2f20bac8ec1d0454c6b">EN_deleteproject</a>(ph);</div>
</div><!-- fragment --><p>After an input file has been loaded in this fashion the resulting network can have objects added or deleted, and their properties set using the various Toolkit functions .</p>
<p>The second method for supplying network data to a project is to use the Toolkit's functions to add objects and to set their properties via code. In this case the <a class="el" href="group___project.html#ga85ee60fa7ba313a02fd0c1213fc7f5b2">EN_init</a> function should be called immediately after creating a project, passing in the names of a report and binary output files (both optional) as well as the choices of flow units and head loss formulas to use. After that the various <b>EN_add</b> functions, such as <a class="el" href="group___nodes.html#ga68c9d195ccd4dc176e4bde4e6c850e2c">EN_addnode</a> , <a class="el" href="epanet2__2_8h.html#afc7def0a8075c8110c96288ac72b21dc">EN_addlink</a> , <a class="el" href="group___patterns.html#ga08d07e0b7d335df9f2fb5a20766ad5ac">EN_addpattern</a> , <a class="el" href="group___controls.html#ga7a996963461428143bc635a1968d584c">EN_addcontrol</a> , etc., can be called to add new objects to the network. Here is a partial example of constructing a network from code:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> index;</div>
<div class="line"><a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph;</div>
<div class="line"><a class="code hl_function" href="group___project.html#ga550a6ee3432932edce526c6cf0e0742e">EN_createproject</a>(&amp;ph);</div>
<div class="line"><a class="code hl_function" href="group___project.html#ga85ee60fa7ba313a02fd0c1213fc7f5b2">EN_init</a>(ph, <span class="stringliteral">&quot;net1.rpt&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#gaddd06e77a2a965546c5d16568f720e35a22b4a20880101ae8f318f50851a7aced">EN_GPM</a>, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga88e5eaa8af00626ebc9923f05f773e95a2039cc9d732d4c21367c74f22c274d81">EN_HW</a>);</div>
<div class="line"><a class="code hl_function" href="group___nodes.html#ga68c9d195ccd4dc176e4bde4e6c850e2c">EN_addnode</a>(ph, <span class="stringliteral">&quot;J1&quot;</span>, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga5be146aaf09fd211d451e0f0de7015e1a4280a9ae6b9135eba19c2cfe2f60b259">EN_JUNCTION</a>, &amp;index);</div>
<div class="line"><a class="code hl_function" href="group___nodes.html#ga68c9d195ccd4dc176e4bde4e6c850e2c">EN_addnode</a>(ph, <span class="stringliteral">&quot;J2&quot;</span>, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga5be146aaf09fd211d451e0f0de7015e1a4280a9ae6b9135eba19c2cfe2f60b259">EN_JUNCTION</a>, &amp;index);</div>
<div class="line"><a class="code hl_function" href="epanet2__2_8h.html#afc7def0a8075c8110c96288ac72b21dc">EN_addlink</a>(ph, <span class="stringliteral">&quot;P1&quot;</span>, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#gabf3b15dab651a86d41b4cdffa1714f2ba6bf06fe0b37d2ace2182bbb945875d1a">EN_PIPE</a>, <span class="stringliteral">&quot;J1&quot;</span>, <span class="stringliteral">&quot;J2&quot;</span>, &amp;index);</div>
<div class="line"><span class="comment">// additional function calls to complete building the network</span></div>
<div class="ttc" id="aepanet2__2_8h_html_afc7def0a8075c8110c96288ac72b21dc"><div class="ttname"><a href="epanet2__2_8h.html#afc7def0a8075c8110c96288ac72b21dc">EN_addlink</a></div><div class="ttdeci">int DLLEXPORT EN_addlink(EN_Project ph, const char *id, int linkType, const char *fromNode, const char *toNode, int *out_index)</div><div class="ttdoc">Adds a new link to a project.</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_ga5be146aaf09fd211d451e0f0de7015e1a4280a9ae6b9135eba19c2cfe2f60b259"><div class="ttname"><a href="epanet2__enums_8h.html#ga5be146aaf09fd211d451e0f0de7015e1a4280a9ae6b9135eba19c2cfe2f60b259">EN_JUNCTION</a></div><div class="ttdeci">@ EN_JUNCTION</div><div class="ttdoc">Junction node.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:196</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_ga88e5eaa8af00626ebc9923f05f773e95a2039cc9d732d4c21367c74f22c274d81"><div class="ttname"><a href="epanet2__enums_8h.html#ga88e5eaa8af00626ebc9923f05f773e95a2039cc9d732d4c21367c74f22c274d81">EN_HW</a></div><div class="ttdeci">@ EN_HW</div><div class="ttdoc">Hazen-Williams.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:275</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_gabf3b15dab651a86d41b4cdffa1714f2ba6bf06fe0b37d2ace2182bbb945875d1a"><div class="ttname"><a href="epanet2__enums_8h.html#gabf3b15dab651a86d41b4cdffa1714f2ba6bf06fe0b37d2ace2182bbb945875d1a">EN_PIPE</a></div><div class="ttdeci">@ EN_PIPE</div><div class="ttdoc">Pipe.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:207</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_gaddd06e77a2a965546c5d16568f720e35a22b4a20880101ae8f318f50851a7aced"><div class="ttname"><a href="epanet2__enums_8h.html#gaddd06e77a2a965546c5d16568f720e35a22b4a20880101ae8f318f50851a7aced">EN_GPM</a></div><div class="ttdeci">@ EN_GPM</div><div class="ttdoc">Gallons per minute.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:289</div></div>
<div class="ttc" id="agroup___nodes_html_ga68c9d195ccd4dc176e4bde4e6c850e2c"><div class="ttname"><a href="group___nodes.html#ga68c9d195ccd4dc176e4bde4e6c850e2c">EN_addnode</a></div><div class="ttdeci">int DLLEXPORT EN_addnode(EN_Project ph, const char *id, int nodeType, int *out_index)</div><div class="ttdoc">Adds a new node to a project.</div></div>
<div class="ttc" id="agroup___project_html_ga85ee60fa7ba313a02fd0c1213fc7f5b2"><div class="ttname"><a href="group___project.html#ga85ee60fa7ba313a02fd0c1213fc7f5b2">EN_init</a></div><div class="ttdeci">int DLLEXPORT EN_init(EN_Project ph, const char *rptFile, const char *outFile, int unitsType, int headLossType)</div><div class="ttdoc">Initializes an EPANET project.</div></div>
</div><!-- fragment --><p>See the <a class="el" href="_example2.html">Network Building Example</a> for a more complete example. The labels used to name objects cannot contain spaces, semi-colons, or double quotes nor exceed <a class="el" href="group___enumerations.html#ga932628312d571ecb45829966f4b54be9">EN_MAXID</a> characters in length. While adding objects their properties can be set as described in the next section. Attemtping to change a network's structure by adding or deleting nodes and links while the Toolkit's hydraulic or water quality solvers are open will result in an error condition.</p>
<h1><a class="anchor" id="Properties"></a>
Setting Object Properties</h1>
<p>The Toolkit contains several functions for retrieving and setting the properties of a network's objects and its analysis options. The names of retrieval functions all begin with <b>EN_get</b> (e.g., <a class="el" href="group___nodes.html#ga364c0ae5843d585148313b61e88dd1ac">EN_getnodevalue</a>, <a class="el" href="group___options.html#ga67a91dc50d36a0695e832a77bd69f116">EN_getoption</a>, etc.) while the functions used for setting parameter values begin with <b>EN_set</b> (e.g., <a class="el" href="group___nodes.html#ga4f3dcdb87c15a064b7fed1131d5287bb">EN_setnodevalue</a>, <a class="el" href="group___options.html#ga3ea580fa991f5b144614c690bc722b88">EN_setoption</a>, etc.).</p>
<p>Most of these functions use an index number to refer to a specific network component (such as a node, link, time pattern or data curve). This number is simply the position of the component in the list of all components of similar type (e.g., node 10 is the tenth node, starting from 1, in the network) and is not the same as the ID label assigned to the component. A series of functions exist to determine a component's index number given its ID label (see <a class="el" href="group___nodes.html#ga883d7add8e651be1a52abb0b18dc32a2">EN_getnodeindex</a> , <a class="el" href="group___links.html#ga5aa82df4f38d17f9e73ae306976df3b7">EN_getlinkindex</a> , <a class="el" href="epanet2__2_8h.html#a06c5d55b20cce26e9850e039b91ce0bc">EN_getpatternindex</a> , and <a class="el" href="group___curves.html#ga074e327e27cb11c0a2bb08b68fa07250">EN_getcurveindex</a> ). Likewise, functions exist to retrieve a component's ID label given its index number (see <a class="el" href="group___links.html#gaebca72de0c07fbf1aa0dbe1bd9507133">EN_getlinkid</a> , <a class="el" href="group___nodes.html#ga6a2bc8bc5a10ef063d401234e91896e8">EN_getnodeid</a> , <a class="el" href="group___patterns.html#gac401648eb3de020d824e24432e952b78">EN_getpatternid</a> , and <a class="el" href="group___curves.html#gacafadfef769c216afca02aab9b697b81">EN_getcurveid</a> ). The <a class="el" href="group___project.html#gac3083cec1ade11773c162f8359aa9f43">EN_getcount</a> function can be used to determine the number of different components in the network. Be aware that a component's index can change as elements are added or deleted from the network. The <a class="el" href="group___nodes.html#ga68c9d195ccd4dc176e4bde4e6c850e2c">EN_addnode</a> and <a class="el" href="epanet2__2_8h.html#afc7def0a8075c8110c96288ac72b21dc">EN_addlink</a> functions return the index of the newly added node or link as a convenience for immediately setting their properties.</p>
<p>The code below is an example of using the property retrieval and setting functions. It changes all links with diameter of 10 inches to 12 inches.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> changeDiameters(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span>   i, nLinks;</div>
<div class="line">    <span class="keywordtype">double</span> diam;</div>
<div class="line">    <a class="code hl_function" href="group___project.html#gac3083cec1ade11773c162f8359aa9f43">EN_getcount</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga9fab0d1b11a0670601f9bc4dfa670105a66006e6a72fc550164d89316f7f07eb7">EN_LINKCOUNT</a>, &amp;nLinks);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 1; i &lt;= nLinks; i++)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="group___links.html#ga0d7ae66dd64e55abd45ab6175e8e200d">EN_getlinkvalue</a>(ph, i, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga84af78c42cef7c16a513fbdba3b7f4eda7f5e0564ed5bfa824c730e055bf32efb">EN_DIAMETER</a>, &amp;diam);</div>
<div class="line">        <span class="keywordflow">if</span> (diam == 10) <a class="code hl_function" href="group___links.html#ga510d5d4e8bf94b69c2cd04e786cf3f8e">EN_setlinkvalue</a>(ph, i, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga84af78c42cef7c16a513fbdba3b7f4eda7f5e0564ed5bfa824c730e055bf32efb">EN_DIAMETER</a>, 12);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aepanet2__enums_8h_html_ga84af78c42cef7c16a513fbdba3b7f4eda7f5e0564ed5bfa824c730e055bf32efb"><div class="ttname"><a href="epanet2__enums_8h.html#ga84af78c42cef7c16a513fbdba3b7f4eda7f5e0564ed5bfa824c730e055bf32efb">EN_DIAMETER</a></div><div class="ttdeci">@ EN_DIAMETER</div><div class="ttdoc">Pipe/valve diameter.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:78</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_ga9fab0d1b11a0670601f9bc4dfa670105a66006e6a72fc550164d89316f7f07eb7"><div class="ttname"><a href="epanet2__enums_8h.html#ga9fab0d1b11a0670601f9bc4dfa670105a66006e6a72fc550164d89316f7f07eb7">EN_LINKCOUNT</a></div><div class="ttdeci">@ EN_LINKCOUNT</div><div class="ttdoc">Number of links (pipes + pumps + valves)</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:184</div></div>
<div class="ttc" id="agroup___links_html_ga0d7ae66dd64e55abd45ab6175e8e200d"><div class="ttname"><a href="group___links.html#ga0d7ae66dd64e55abd45ab6175e8e200d">EN_getlinkvalue</a></div><div class="ttdeci">int DLLEXPORT EN_getlinkvalue(EN_Project ph, int index, int property, double *out_value)</div><div class="ttdoc">Retrieves a property value for a link.</div></div>
<div class="ttc" id="agroup___links_html_ga510d5d4e8bf94b69c2cd04e786cf3f8e"><div class="ttname"><a href="group___links.html#ga510d5d4e8bf94b69c2cd04e786cf3f8e">EN_setlinkvalue</a></div><div class="ttdeci">int DLLEXPORT EN_setlinkvalue(EN_Project ph, int index, int property, double value)</div><div class="ttdoc">Sets a property value for a link.</div></div>
<div class="ttc" id="agroup___project_html_gac3083cec1ade11773c162f8359aa9f43"><div class="ttname"><a href="group___project.html#gac3083cec1ade11773c162f8359aa9f43">EN_getcount</a></div><div class="ttdeci">int DLLEXPORT EN_getcount(EN_Project ph, int object, int *out_count)</div><div class="ttdoc">Retrieves the number of objects of a given type in a project.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="hydraulics"></a>
Computing Hydraulics</h1>
<p>There are two ways to use the Toolkit to run a hydraulic analysis:</p><ol type="1">
<li>Use the <a class="el" href="group___hydraulics.html#gaaa7aaf68ebb9c8c6709489073fc08f8e">EN_solveH</a> function to run a complete extended period analysis, without having access to intermediate results.</li>
<li>Use the <a class="el" href="group___hydraulics.html#gad192b9fea6d952eb9c2fb27e5d38aaf1">EN_openH</a> - <a class="el" href="group___hydraulics.html#ga047a21c032812f18945e7d0f98f0fbfd">EN_initH</a> - <a class="el" href="group___hydraulics.html#gaae06b845e3cf5dcb33196a2695a026a7">EN_runH</a> - <a class="el" href="group___hydraulics.html#gac9fb0f4f7ed9388ae1992d0d40dd98f0">EN_nextH</a> - <a class="el" href="group___hydraulics.html#ga243d3c641e02d6a416726eeb76443cf0">EN_closeH</a> series of functions to step through the simulation one hydraulic time step at a time.</li>
</ol>
<p>Method 1 is useful if you only want to run a single hydraulic analysis, perhaps to provide input to a water quality analysis. With this method hydraulic results are always saved to an intermediate hydraulics file at every time step.</p>
<p>Method 2 must be used if you need to access results between time steps or if you wish to run many analyses efficiently. To accomplish the latter, you would make only one call to <b>EN_openH</b> to begin the process, then make successive calls to <b>EN_initH - EN_runH - EN_nextH</b> to perform each analysis, and finally call <b>EN_closeH</b> to close down the hydraulics system. An example of this is shown below (calls to <b>EN_nextH</b> are not needed because we are only making a single period analysis in this example).</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> runHydraulics(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph, <span class="keywordtype">int</span> nRuns)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span>  i;</div>
<div class="line">    <span class="keywordtype">long</span> t;</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#gad192b9fea6d952eb9c2fb27e5d38aaf1">EN_openH</a>(ph);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 1; i &lt;= nRuns; i++)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// user-supplied function to set parameters</span></div>
<div class="line">        setparams(ph, i);</div>
<div class="line">        <span class="comment">// initialize hydraulics; don&#39;t save them to file</span></div>
<div class="line">        <a class="code hl_function" href="group___hydraulics.html#ga047a21c032812f18945e7d0f98f0fbfd">EN_initH</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4">EN_NOSAVE</a>);</div>
<div class="line">        <span class="comment">// solve hydraulics</span></div>
<div class="line">        <a class="code hl_function" href="group___hydraulics.html#gaae06b845e3cf5dcb33196a2695a026a7">EN_runH</a>(ph, &amp;t);</div>
<div class="line">        <span class="comment">// user-supplied function to process results</span></div>
<div class="line">        getresults(ph, i);</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#ga243d3c641e02d6a416726eeb76443cf0">EN_closeH</a>(ph);</div>
<div class="line">}</div>
<div class="ttc" id="aepanet2__enums_8h_html_ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4"><div class="ttname"><a href="epanet2__enums_8h.html#ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4">EN_NOSAVE</a></div><div class="ttdeci">@ EN_NOSAVE</div><div class="ttdoc">Don&#39;t save hydraulics; don&#39;t re-initialize flows.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:412</div></div>
<div class="ttc" id="agroup___hydraulics_html_ga047a21c032812f18945e7d0f98f0fbfd"><div class="ttname"><a href="group___hydraulics.html#ga047a21c032812f18945e7d0f98f0fbfd">EN_initH</a></div><div class="ttdeci">int DLLEXPORT EN_initH(EN_Project ph, int initFlag)</div><div class="ttdoc">Initializes a network prior to running a hydraulic analysis.</div></div>
<div class="ttc" id="agroup___hydraulics_html_ga243d3c641e02d6a416726eeb76443cf0"><div class="ttname"><a href="group___hydraulics.html#ga243d3c641e02d6a416726eeb76443cf0">EN_closeH</a></div><div class="ttdeci">int DLLEXPORT EN_closeH(EN_Project ph)</div><div class="ttdoc">Closes the hydraulic solver freeing all of its allocated memory.</div></div>
<div class="ttc" id="agroup___hydraulics_html_gaae06b845e3cf5dcb33196a2695a026a7"><div class="ttname"><a href="group___hydraulics.html#gaae06b845e3cf5dcb33196a2695a026a7">EN_runH</a></div><div class="ttdeci">int DLLEXPORT EN_runH(EN_Project ph, long *out_currentTime)</div><div class="ttdoc">Computes a hydraulic solution for the current point in time.</div></div>
<div class="ttc" id="agroup___hydraulics_html_gad192b9fea6d952eb9c2fb27e5d38aaf1"><div class="ttname"><a href="group___hydraulics.html#gad192b9fea6d952eb9c2fb27e5d38aaf1">EN_openH</a></div><div class="ttdeci">int DLLEXPORT EN_openH(EN_Project ph)</div><div class="ttdoc">Opens a project&#39;s hydraulic solver.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="quality"></a>
Computing Water Quality</h1>
<p>As with a hydraulic analysis, there are two ways to carry out a water quality analysis:</p>
<ol type="1">
<li>Use the <a class="el" href="group___quality.html#ga7b3d8f4623cc6d4dda6fb9d3afd378f4">EN_solveQ</a> function to run a complete extended period analysis, without having access to intermediate results. A complete set of hydraulic results must have been generated either from running a hydraulic analysis or from importing a saved hydraulics file from a previous run.</li>
<li>Use the <a class="el" href="group___quality.html#ga1e8b2e81f5310d43afbe3aada5027f83">EN_openQ</a> - <a class="el" href="group___quality.html#ga68bfa6606604bf0cedcbc12591749f2c">EN_initQ</a> - <a class="el" href="group___quality.html#ga5ce5c77c9af21711e6b68b90e0512ff9">EN_runQ</a> - <a class="el" href="group___quality.html#ga620133212b97123394de17c9d49a1765">EN_nextQ</a> - <a class="el" href="group___quality.html#gac34d2e8ca6ab7d07475570530a7fdda3">EN_closeQ</a> series of functions to step through the simulation one hydraulic time step at a time. (Replacing <a class="el" href="group___quality.html#ga620133212b97123394de17c9d49a1765">EN_nextQ</a> with <a class="el" href="group___quality.html#ga17b6ebe5947bda7ec2c681bcdef1c2c6">EN_stepQ</a> will step through one water quality time step at a time.)</li>
</ol>
<p>The second option can either be carried out after a hydraulic analysis has been run or simultaneously as hydraulics are being computed. Example code for these two alternatives is shown below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> runSequentialQuality(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line">    <span class="keywordtype">long</span> t, tStep;</div>
<div class="line">    err = <a class="code hl_function" href="group___hydraulics.html#gaaa7aaf68ebb9c8c6709489073fc08f8e">EN_solveH</a>(ph);</div>
<div class="line">    <span class="keywordflow">if</span> (err &gt; 100) <span class="keywordflow">return</span> err;</div>
<div class="line">    <a class="code hl_function" href="group___quality.html#ga1e8b2e81f5310d43afbe3aada5027f83">EN_openQ</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___quality.html#ga68bfa6606604bf0cedcbc12591749f2c">EN_initQ</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4">EN_NOSAVE</a>);</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <a class="code hl_function" href="group___quality.html#ga5ce5c77c9af21711e6b68b90e0512ff9">EN_runQ</a>(ph, &amp;t);</div>
<div class="line">        <span class="comment">// Access quality results for time t here</span></div>
<div class="line">        <a class="code hl_function" href="group___quality.html#ga620133212b97123394de17c9d49a1765">EN_nextQ</a>(ph, &amp;tStep);</div>
<div class="line">    } <span class="keywordflow">while</span> (tStep &gt; 0);</div>
<div class="line">    <a class="code hl_function" href="group___quality.html#gac34d2e8ca6ab7d07475570530a7fdda3">EN_closeQ</a>(ph);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> runConcurrentQuality(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> err = 0;</div>
<div class="line">    <span class="keywordtype">long</span> t, tStep;</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#gad192b9fea6d952eb9c2fb27e5d38aaf1">EN_openH</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#ga047a21c032812f18945e7d0f98f0fbfd">EN_initH</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4">EN_NOSAVE</a>);</div>
<div class="line">    <a class="code hl_function" href="group___quality.html#ga1e8b2e81f5310d43afbe3aada5027f83">EN_openQ</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___quality.html#ga68bfa6606604bf0cedcbc12591749f2c">EN_initQ</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4">EN_NOSAVE</a>);</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        err = <a class="code hl_function" href="group___hydraulics.html#gaae06b845e3cf5dcb33196a2695a026a7">EN_runH</a>(ph, &amp;t);</div>
<div class="line">        <span class="keywordflow">if</span> (err &gt; 100) <span class="keywordflow">break</span>;</div>
<div class="line">        <a class="code hl_function" href="group___quality.html#ga5ce5c77c9af21711e6b68b90e0512ff9">EN_runQ</a>(ph, &amp;t);</div>
<div class="line">        <span class="comment">// Access hydraulic &amp; quality results for time t here</span></div>
<div class="line">        <a class="code hl_function" href="group___hydraulics.html#gac9fb0f4f7ed9388ae1992d0d40dd98f0">EN_nextH</a>(ph, &amp;tStep);</div>
<div class="line">        <a class="code hl_function" href="group___quality.html#ga620133212b97123394de17c9d49a1765">EN_nextQ</a>(ph, &amp;tStep);</div>
<div class="line">    } <span class="keywordflow">while</span> (tStep &gt; 0);</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#ga243d3c641e02d6a416726eeb76443cf0">EN_closeH</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___quality.html#gac34d2e8ca6ab7d07475570530a7fdda3">EN_closeQ</a>(ph);</div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">}</div>
<div class="ttc" id="agroup___hydraulics_html_gac9fb0f4f7ed9388ae1992d0d40dd98f0"><div class="ttname"><a href="group___hydraulics.html#gac9fb0f4f7ed9388ae1992d0d40dd98f0">EN_nextH</a></div><div class="ttdeci">int DLLEXPORT EN_nextH(EN_Project ph, long *out_tStep)</div><div class="ttdoc">Determines the length of time until the next hydraulic event occurs in an extended period simulation.</div></div>
<div class="ttc" id="agroup___quality_html_ga1e8b2e81f5310d43afbe3aada5027f83"><div class="ttname"><a href="group___quality.html#ga1e8b2e81f5310d43afbe3aada5027f83">EN_openQ</a></div><div class="ttdeci">int DLLEXPORT EN_openQ(EN_Project ph)</div><div class="ttdoc">Opens a project&#39;s water quality solver.</div></div>
<div class="ttc" id="agroup___quality_html_ga5ce5c77c9af21711e6b68b90e0512ff9"><div class="ttname"><a href="group___quality.html#ga5ce5c77c9af21711e6b68b90e0512ff9">EN_runQ</a></div><div class="ttdeci">int DLLEXPORT EN_runQ(EN_Project ph, long *out_currentTime)</div><div class="ttdoc">Makes hydraulic and water quality results at the start of the current time period available to a proj...</div></div>
<div class="ttc" id="agroup___quality_html_ga620133212b97123394de17c9d49a1765"><div class="ttname"><a href="group___quality.html#ga620133212b97123394de17c9d49a1765">EN_nextQ</a></div><div class="ttdeci">int DLLEXPORT EN_nextQ(EN_Project ph, long *out_tStep)</div><div class="ttdoc">Advances a water quality simulation over the time until the next hydraulic event.</div></div>
<div class="ttc" id="agroup___quality_html_ga68bfa6606604bf0cedcbc12591749f2c"><div class="ttname"><a href="group___quality.html#ga68bfa6606604bf0cedcbc12591749f2c">EN_initQ</a></div><div class="ttdeci">int DLLEXPORT EN_initQ(EN_Project ph, int saveFlag)</div><div class="ttdoc">Initializes a network prior to running a water quality analysis.</div></div>
<div class="ttc" id="agroup___quality_html_gac34d2e8ca6ab7d07475570530a7fdda3"><div class="ttname"><a href="group___quality.html#gac34d2e8ca6ab7d07475570530a7fdda3">EN_closeQ</a></div><div class="ttdeci">int DLLEXPORT EN_closeQ(EN_Project ph)</div><div class="ttdoc">Closes the water quality solver, freeing all of its allocated memory.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="results"></a>
Retrieving Computed Results</h1>
<p>The <a class="el" href="group___nodes.html#ga364c0ae5843d585148313b61e88dd1ac">EN_getnodevalue</a> and <a class="el" href="group___links.html#ga0d7ae66dd64e55abd45ab6175e8e200d">EN_getlinkvalue</a> functions can also be used to retrieve the results of hydraulic and water quality simulations. The computed parameters (and their Toolkit codes) that can be retrieved are as follows: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">For Nodes:   </th><th class="markdownTableHeadNone">For Links:    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>EN_DEMAND</b> (total node outflow   </td><td class="markdownTableBodyNone"><b>EN_FLOW</b> (flow rate)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>EN_HEAD</b> (hydraulic head)   </td><td class="markdownTableBodyNone"><b>EN_VELOCITY</b> (flow velocity)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>EN_PRESSURE</b> (pressure)   </td><td class="markdownTableBodyNone"><b>EN_HEADLOSS</b> (head loss)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>EN_TANKLEVEL</b> (tank water level)   </td><td class="markdownTableBodyNone"><b>EN_STATUS</b> (link status)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>EN_TANKVOLUME</b> (tank water volume)   </td><td class="markdownTableBodyNone"><b>EN_SETTING</b> (pump speed or valve setting)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>EN_QUALITY</b> (water quality)   </td><td class="markdownTableBodyNone"><b>EN_ENERGY</b> (pump energy usage)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>EN_SOURCEMASS</b> (source mass inflow)   </td><td class="markdownTableBodyNone"><b>EN_PUMP_EFFIC</b> (pump efficiency)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><b>EN_LINK_LEAKAGE</b> (pipe leakage flow rate   </td></tr>
</table>
<p>In addition, the following quantities related to a node's outflow can be retrieved:</p><ol type="1">
<li>EN_FULLDEMAND (consumer demand requested)</li>
<li>EN_DEMANDFLOW (consumer demand delivered)</li>
<li>EN_DEMANDDEFICIT (difference between consumer demand requested and delivered)</li>
<li>EN_EMITTERFLOW (outflow through a node's emitter)</li>
<li>EN_LEAKAGEFLOW (outflow due to leakage in a node's connecting pipes) where <code>EN_DEMAND</code> is the sum of <code>EN_DEMANDFLOW</code>, <code>EN_EMITTERFLOW</code>, and <code>EN_LEAKAGEFLOW</code>.</li>
</ol>
<p>The following code shows how to retrieve the pressure at each node of a network after each time step of a hydraulic analysis (<code>writetofile</code> is a user-defined function that will write a record to a file): </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> getPressures(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span>   i, numNodes;</div>
<div class="line">    <span class="keywordtype">long</span>  t, tStep;</div>
<div class="line">    <span class="keywordtype">double</span> p;</div>
<div class="line">    <span class="keywordtype">char</span>  <span class="keywordtype">id</span>[<a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga932628312d571ecb45829966f4b54be9a3b2215f2c573eb5a91e090777f022618">EN_MAXID</a> + 1];</div>
<div class="line">    <a class="code hl_function" href="group___project.html#gac3083cec1ade11773c162f8359aa9f43">EN_getcount</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga9fab0d1b11a0670601f9bc4dfa670105a9506750f3b6412c8d871509977417623">EN_NODECOUNT</a>, &amp;numNodes);</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#gad192b9fea6d952eb9c2fb27e5d38aaf1">EN_openH</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#ga047a21c032812f18945e7d0f98f0fbfd">EN_initH</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#ga31619090f36109c92b31c2c3dc66c230a0298460efda9f3c67c6a84f84149f2d4">EN_NOSAVE</a>);</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <a class="code hl_function" href="group___hydraulics.html#gaae06b845e3cf5dcb33196a2695a026a7">EN_runH</a>(ph, &amp;t);</div>
<div class="line">        <span class="keywordflow">for</span> (i = 1; i &lt;= NumNodes; i++) {</div>
<div class="line">            <a class="code hl_function" href="group___nodes.html#ga364c0ae5843d585148313b61e88dd1ac">EN_getnodevalue</a>(ph, i, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#gae538c7e564d9bd7c5a1f841b107c417da2c30fc406441e20f37651807a2d53510">EN_PRESSURE</a>, &amp;p);</div>
<div class="line">            <a class="code hl_function" href="group___nodes.html#ga6a2bc8bc5a10ef063d401234e91896e8">EN_getnodeid</a>(ph, i, <span class="keywordtype">id</span>);</div>
<div class="line">            writetofile(t, <span class="keywordtype">id</span>, p);</div>
<div class="line">        }</div>
<div class="line">        <a class="code hl_function" href="group___hydraulics.html#gac9fb0f4f7ed9388ae1992d0d40dd98f0">EN_nextH</a>(&amp;tStep);</div>
<div class="line">    } <span class="keywordflow">while</span> (tStep &gt; 0);</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#ga243d3c641e02d6a416726eeb76443cf0">EN_closeH</a>(ph);</div>
<div class="line">}</div>
<div class="ttc" id="aepanet2__enums_8h_html_ga932628312d571ecb45829966f4b54be9a3b2215f2c573eb5a91e090777f022618"><div class="ttname"><a href="epanet2__enums_8h.html#ga932628312d571ecb45829966f4b54be9a3b2215f2c573eb5a91e090777f022618">EN_MAXID</a></div><div class="ttdeci">@ EN_MAXID</div><div class="ttdoc">Max. # characters in ID name.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:27</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_ga9fab0d1b11a0670601f9bc4dfa670105a9506750f3b6412c8d871509977417623"><div class="ttname"><a href="epanet2__enums_8h.html#ga9fab0d1b11a0670601f9bc4dfa670105a9506750f3b6412c8d871509977417623">EN_NODECOUNT</a></div><div class="ttdeci">@ EN_NODECOUNT</div><div class="ttdoc">Number of nodes (junctions + tanks + reservoirs)</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:182</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_gae538c7e564d9bd7c5a1f841b107c417da2c30fc406441e20f37651807a2d53510"><div class="ttname"><a href="epanet2__enums_8h.html#gae538c7e564d9bd7c5a1f841b107c417da2c30fc406441e20f37651807a2d53510">EN_PRESSURE</a></div><div class="ttdeci">@ EN_PRESSURE</div><div class="ttdoc">Current computed pressure (read only)</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:48</div></div>
<div class="ttc" id="agroup___nodes_html_ga364c0ae5843d585148313b61e88dd1ac"><div class="ttname"><a href="group___nodes.html#ga364c0ae5843d585148313b61e88dd1ac">EN_getnodevalue</a></div><div class="ttdeci">int DLLEXPORT EN_getnodevalue(EN_Project ph, int index, int property, double *out_value)</div><div class="ttdoc">Retrieves a property value for a node.</div></div>
<div class="ttc" id="agroup___nodes_html_ga6a2bc8bc5a10ef063d401234e91896e8"><div class="ttname"><a href="group___nodes.html#ga6a2bc8bc5a10ef063d401234e91896e8">EN_getnodeid</a></div><div class="ttdeci">int DLLEXPORT EN_getnodeid(EN_Project ph, int index, char *out_id)</div><div class="ttdoc">Gets the ID name of a node given its index.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="report"></a>
Producing a Report</h1>
<p>The Toolkit has some built-in capabilities to produce formatted output results saved to a file. More specialized reporting needs can always be handled by writing custom code.</p>
<p>The <a class="el" href="group___reporting.html#gae123a4b7fe3585a3ae137a6f82469737">EN_setreport</a> function is used to define the format of a report while the <a class="el" href="group___reporting.html#gac89aaac21e17d1900bcd0a7b8bac2db1">EN_report</a> function actually writes the report. The latter should be called only after a hydraulic or water quality analysis has been made. An example of creating a report that lists all nodes where the pressure variation over the duration of the simulation exceeds 20 psi is shown below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> reportPressureVariation(<a class="code hl_typedef" href="epanet2__2_8h.html#ac1b7237e65fbaad96c05cc847adc0aeb">EN_Project</a> ph)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Compute ranges (max - min)</span></div>
<div class="line">    <a class="code hl_function" href="group___options.html#gac047585ae8f24cfbb37110cfd616ea1f">EN_settimeparam</a>(ph, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#gad4dff8507f96acf515824b4252f1836aaff5e89cdaa2058c95b78dd09f62d3246">EN_STATISTIC</a>, <a class="code hl_enumvalue" href="epanet2__enums_8h.html#gadebd7dbb8901f4d6c9e47a4afa860d04ad9f00701cf4c4c2fec618da32074e42d">EN_RANGE</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Solve and save hydraulics</span></div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#gaaa7aaf68ebb9c8c6709489073fc08f8e">EN_solveH</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___hydraulics.html#ga0eda31372ded11a0a053798e41be456c">EN_saveH</a>(ph);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Define contents of the report</span></div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#gac556dbe785e1bb05f970c6631ad46037">EN_resetreport</a>(ph);</div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#gae123a4b7fe3585a3ae137a6f82469737">EN_setreport</a>(ph, <span class="stringliteral">&quot;FILE myfile.rpt&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#gae123a4b7fe3585a3ae137a6f82469737">EN_setreport</a>(ph, <span class="stringliteral">&quot;NODES ALL&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#gae123a4b7fe3585a3ae137a6f82469737">EN_setreport</a>(ph, <span class="stringliteral">&quot;PRESSURE PRECISION 1&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#gae123a4b7fe3585a3ae137a6f82469737">EN_setreport</a>(ph, <span class="stringliteral">&quot;PRESSURE ABOVE 20&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Write the report to file</span></div>
<div class="line">    <a class="code hl_function" href="group___reporting.html#gac89aaac21e17d1900bcd0a7b8bac2db1">EN_report</a>(ph);</div>
<div class="line">}</div>
<div class="ttc" id="aepanet2__enums_8h_html_gad4dff8507f96acf515824b4252f1836aaff5e89cdaa2058c95b78dd09f62d3246"><div class="ttname"><a href="epanet2__enums_8h.html#gad4dff8507f96acf515824b4252f1836aaff5e89cdaa2058c95b78dd09f62d3246">EN_STATISTIC</a></div><div class="ttdeci">@ EN_STATISTIC</div><div class="ttdoc">Reporting statistic code (see EN_StatisticType)</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:125</div></div>
<div class="ttc" id="aepanet2__enums_8h_html_gadebd7dbb8901f4d6c9e47a4afa860d04ad9f00701cf4c4c2fec618da32074e42d"><div class="ttname"><a href="epanet2__enums_8h.html#gadebd7dbb8901f4d6c9e47a4afa860d04ad9f00701cf4c4c2fec618da32074e42d">EN_RANGE</a></div><div class="ttdeci">@ EN_RANGE</div><div class="ttdoc">Report maximum - minimum over simulation period.</div><div class="ttdef"><b>Definition</b> epanet2_enums.h:391</div></div>
<div class="ttc" id="agroup___options_html_gac047585ae8f24cfbb37110cfd616ea1f"><div class="ttname"><a href="group___options.html#gac047585ae8f24cfbb37110cfd616ea1f">EN_settimeparam</a></div><div class="ttdeci">int DLLEXPORT EN_settimeparam(EN_Project ph, int param, long value)</div><div class="ttdoc">Sets the value of a time parameter.</div></div>
<div class="ttc" id="agroup___reporting_html_gac556dbe785e1bb05f970c6631ad46037"><div class="ttname"><a href="group___reporting.html#gac556dbe785e1bb05f970c6631ad46037">EN_resetreport</a></div><div class="ttdeci">int DLLEXPORT EN_resetreport(EN_Project ph)</div><div class="ttdoc">Resets a project&#39;s report options to their default values.</div></div>
<div class="ttc" id="agroup___reporting_html_gae123a4b7fe3585a3ae137a6f82469737"><div class="ttname"><a href="group___reporting.html#gae123a4b7fe3585a3ae137a6f82469737">EN_setreport</a></div><div class="ttdeci">int DLLEXPORT EN_setreport(EN_Project ph, const char *format)</div><div class="ttdoc">Processes a reporting format command.</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="footer">OWA-EPANET Toolkit 2.3 &copy 2025</li> -->
  </ul>
</div>
</body>
</html>
